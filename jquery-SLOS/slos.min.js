(function($){var __slice=Array.prototype.slice;var slos={globals:{},instances:[],loadedPrograms:{},utils:{getExtension:function(filename){var re=/(?:\.([^.]+))?$/;return re.exec(filename)[1];},getBasename:function(filename){return'/'.join(filename.split(/[\\/]/).pop());},},File:function(){}};var SlosManager=function(options){slos.instances.push(this);this.baseProgram="viewer";this.baseProcess=null;this.programs={};this.showlogo=options.showlogo;this.programConfigurations={};this.processes=[];this.init=function(options){this.container=options.container;if(typeof options.programs!=='undefined'){for(var programName in options.programs){this.programs[programName]=slos.loadedPrograms[programName];this.programConfigurations[programName]=options.programs[programName];}}
if(options.baseProgram){this.baseProgram=options.baseProgram;this.baseProcess=this.startProgram(this.baseProgram,this.container);}};this.error=function(str){console.error(str);};this.start=function(program,file){this.startProgram(program,file);};this.startProgram=function(programName,args){if(typeof this.programs[programName]==='undefined')
return this.error("Program not found: "+programName);var program=new this.programs[programName](this.programConfigurations[programName]);program.slos=this;if(args){program.args(args);}
this.processes.push(program);return program;};this.updateEvents=function(){var self=this;$("[data-slos-select]").click(function(){var programName=$(this).attr('data-slos-select');var fileSLID=$(this).attr('data-slos-file');var file=self.baseProcess.files[fileSLID];self.startProgram(programName,{file:file});});};this.init(options);};$.fn.slos=function(options){options.container=$(this);return new SlosManager(options);};$.slos=slos;})(jQuery);$.slos.loadedPrograms["explorer"]=function(options){this.dependencies=["jquery","slos","ejs","font-awesome"];this.slos=null;this.files={};this.dirLevel=0;this.template=options.template;this.fileId=0;this.args=function(args){if(typeof args==="string")
this.container=$(args);else
this.container=args;}
this.getFAGroup=function(extension){var fileext=extension.toLowerCase();if("pdf"==fileext)
return"pdf";else if(["doc","docx","odt"].indexOf(fileext)!=-1)
return"word";else if(["xls","xlsx","ods"].indexOf(fileext)!=-1)
return"excel";else if(["ppt","pptx","odp"].indexOf(fileext)!=-1)
return"ppt";else if(["mp3","cda","3ga","midi","mogg","ogg","wav","m4a","m4p","mid","m4p","raw","wma"].indexOf(fileext)!=-1)
return"audio";else if(["3g2","3gp","3gp2","f4v","flv","mp4","wmv","mp4v","avi","mpeg","mov"].indexOf(fileext)!=-1)
return"video";else if(['bmp','jpeg','jpg','pcx','psd','sgv','wmf','dxf','met','pgm','ras','svm','xbm','emf','pbm','plt','sda','tga','xpm','eps','pcd','png','sdd','tif','tiff','gif','pct','ppm','sgf','vor'].indexOf(fileext)!=-1)
return"image";else if(['txt','cs','js','jsx','tsx','ts','php','rb','r','py','asp','jsp','java','h','m','dat'].indexOf(fileext)!=-1)
return"code";else if(['zip','rar','iso','tar','bz2','gz','lz','7z','apk','b1','cab','car','dmg','jar','pak','pea','tar.gz','tgz','tar.Z','tar.bz2','tbz2','tar.lzma','tlz','zipx','ace','tar','gz'].indexOf(fileext)!=-1)
return"zip";else
return"";}
this.addFileNames=function(fileNames,meta){for(var i in fileNames){var file=new $.slos.File(meta);file.type="file";file.filename=fileNames[i];file.extension=$.slos.utils.getExtension(file.filename);file.group=this.getFAGroup(file.extension);file.slid=++this.fileId;this.files[file.slid]=file;}
this.container.html(ejs.render(this.template,{files:this.files}));this.slos.updateEvents();}
this.args(options.container);};$.slos.loadedPrograms["redirect"]=function(options){this.slos=null;this.urlformat=options.urlformat;this.newWindow=options.newWindow;this.args=function(args){var url=ejs.render(this.urlformat,args);if(this.newWindow)
window.open(url);else
window.location=url;}};